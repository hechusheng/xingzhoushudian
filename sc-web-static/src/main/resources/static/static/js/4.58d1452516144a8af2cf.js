webpackJsonp([4],{533:function(e,t,a){a(588);var o=a(204)(a(548),a(577),"data-v-3eb1e267",null);e.exports=o.exports},538:function(e,t,a){e.exports={default:a(539),__esModule:!0}},539:function(e,t,a){var o=a(51),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},548:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(538),i=a.n(o);t.default={data:function(){var e=function(e,t,a){""===t.replace(/(^\s*)|(\s*$)/g,"")?a(new Error("请输入必填项")):a()};return{data:[],defaultProps:{children:"children",label:"label"},dataSize:0,tableData:[],pageNum:1,pageSize:10,formData:{},menuButtonList:[],dialogAdd:!1,dialogEdit:!1,innerVisibleAdd:!1,innerVisibleEdit:!1,getDataUrl:this.$store.state.url+"/webauth/post/postsList",addUrl:this.$store.state.url+"/webauth/post/addPost",editUrl:this.$store.state.url+"/webauth/post/updatePost",delUrl:this.$store.state.url+"/webauth/post/deletePost",getMenuUrl:this.$store.state.url+"/webauth/dept/deptsList",formInline:{postName:""},addInfo:{postName:"",postNameJ:""},selectId:{},editInfo:{},editInfoBefore:{},chooseDept:{},deptName:"",rules:{postCode:[{required:!0,validator:e,trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}],postName:[{required:!0,validator:e,trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}],postNameJ:[{required:!0,validator:e,trigger:"blur"},{min:1,max:40,message:"长度在 1 到 40 个字符",trigger:"blur"}]}}},watch:{pageNum:function(){this.getData()},pageSize:function(){this.getData()}},mounted:function(){this.$nextTick(function(){this.getData(),this.getButton()})},methods:{getButton:function(){var e=this;this.menuCode=this.$store.state.menuCode;var t=new URLSearchParams;t.append("USER_NAME",localStorage.getItem("ms_username")),t.append("MENU_CODE",this.menuCode),t.append("BUTTON_CODE",""),this.$axios.post(this.$store.state.getButtonUrl,t).then(function(t){0==t.data.code?e.menuButtonList=t.data.data:e.$message({showClose:!0,message:t.data.msg,type:"error"})})},chooseClick:function(e){"addPost"==e?this.addPost("addInfo"):"editPost"==e?this.editPost():"delPost"==e&&this.delPost()},searchForm:function(){var e=new URLSearchParams;e.append("formData",i()({postName:this.formInline.postName})),this.formData=e,1!=this.pageNum?this.pageNum=1:this.getData()},resetForm:function(e){this.$refs[e].resetFields()},addPost:function(e){this.dialogAdd=!0,this.deptName="",this.$refs[e]&&this.$refs[e].resetFields()},openTreeChooseAdd:function(){this.getDeptData(),this.innerVisibleAdd=!0,this.chooseDept={}},openTreeChooseEdit:function(){this.getDeptData(),this.innerVisibleEdit=!0,this.chooseDept={}},handleNodeClick:function(e){this.chooseDept=e},addChooseSure:function(e){this.chooseDept.id?1==e?(this.deptName=this.chooseDept.label,this.innerVisibleAdd=!1):(this.editInfo.deptName=this.chooseDept.label,this.innerVisibleEdit=!1):this.$message({showClose:!0,message:"请选择一个部门",type:"error"})},addSure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=new URLSearchParams;a.append("postName",t.addInfo.postName),a.append("postNameJ",t.addInfo.postNameJ),a.append("deptCode",t.chooseDept.id),t.$axios.post(t.addUrl,a).then(function(e){t.formData={},0==e.data.code?(t.getData(),t.$message({showClose:!0,message:"新增岗位成功",type:"success"})):t.$message({showClose:!0,message:e.data.msg,type:"error"})}),t.dialogAdd=!1})},cancelDialog:function(){this.dialogAdd=!1,this.dialogEdit=!1},cancelTreeDialog:function(){this.innerVisibleAdd=!1,this.innerVisibleEdit=!1},editPost:function(e){this.editInfoBefore&&void 0!==this.editInfoBefore.uuid?(this.dialogEdit=!0,this.editInfo=JSON.parse(i()(this.editInfoBefore))):this.$message({showClose:!0,message:"请选择一条数据进行修改",type:"error"})},editSure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=new URLSearchParams;a.append("postCode",t.editInfo.postCode),a.append("postName",t.editInfo.postName),a.append("postNameJ",t.editInfo.postNameJ),a.append("deptCode",t.chooseDept.id),t.$axios.post(t.editUrl,a).then(function(e){0==e.data.code?(t.getData(),t.$message({showClose:!0,message:"修改岗位成功",type:"success"})):t.$message({showClose:!0,message:e.data.msg,type:"error"})}),t.dialogEdit=!1})},delPost:function(){var e=this;void 0!==this.selectId.length&&0<this.selectId.length?this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=new URLSearchParams;t.append("postCodes",e.selectId),e.$axios.post(e.delUrl,t).then(function(t){0==t.data.code?(Number(e.dataSize)-Number(e.delNum)>Number(Number(e.pageNum)-1)*Number(e.pageSize)&&Number(e.pageNum)>1?e.getData():e.pageNum--,e.editInfo={},e.$message({type:"success",message:"删除成功!"})):e.$message({showClose:!0,message:t.data.msg,type:"error"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.$message({showClose:!0,message:"请选择一条数据进行删除",type:"error"})},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.pageNum=e},chooseOne:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].postCode);this.delNum=t.length,this.selectId=t.join(","),1==e.length?this.editInfoBefore=JSON.parse(i()(e[0])):this.editInfoBefore={}},chooseAll:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].postCode);this.delNum=t.length,this.selectId=t.join(","),this.editInfoBefore={}},getData:function(){var e=this;this.$axios.post(this.getDataUrl+"?pageSize="+this.pageSize+"&pageNum="+this.pageNum,this.formData).then(function(t){e.selectId={},e.editInfoBefore={},0==t.data.code?(e.tableData=t.data.data.list,e.dataSize=t.data.data.total):e.$message({showClose:!0,message:t.data.msg,type:"error"})})},getDeptData:function(){var e=this;this.$axios.post(this.getMenuUrl).then(function(t){0==t.data.code?e.data=t.data.data:e.$message({showClose:!0,message:t.data.msg,type:"error"})})}}}},562:function(e,t,a){t=e.exports=a(88)(!1),t.push([e.i,".handle-box[data-v-3eb1e267]{margin-bottom:20px}.inputWidth[data-v-3eb1e267]{width:200px}.mar_top_12[data-v-3eb1e267]{margin-top:12px}.roleStyle[data-v-3eb1e267]{width:180px;height:35px;line-height:35px;float:left;text-align:center;border:1px solid #d1dbe5}.topNoStyle[data-v-3eb1e267]{border-top:none}.rightNoStyle[data-v-3eb1e267]{border-right:none}.tdStyle[data-v-3eb1e267]{width:180px;height:40px;line-height:40px;text-align:center;border:1px solid #d1dbe5;border-top:none;border-right:none}",""])},577:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formInline.postName,callback:function(t){e.$set(e.formInline,"postName",t)},expression:"formInline.postName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchForm()}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:function(t){e.resetForm("formInline")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},e._l(e.menuButtonList,function(t){return a("el-button",{attrs:{type:"primary",icon:t.buttonStyle},on:{click:function(a){e.chooseClick(t.buttonUrl)}}},[e._v(e._s(t.buttonName))])})),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",height:"380"},on:{select:e.chooseOne,"select-all":e.chooseAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postName",label:"岗位名称",fixed:"left",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"postNameJ",label:"岗位名称简"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门名称"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增岗位",visible:e.dialogAdd,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("el-dialog",{attrs:{width:"30%",title:"选择部门",visible:e.innerVisibleAdd,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.innerVisibleAdd=t}}},[a("div",{staticStyle:{"max-height":"300px",overflow:"auto"}},[a("el-tree",{attrs:{data:e.data,props:e.defaultProps,"highlight-current":!0},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelTreeDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addChooseSure(1)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-form",{ref:"addInfo",attrs:{model:e.addInfo,"label-width":"100px",rules:e.rules,inline:!0,"label-position":"right"}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("el-input",{staticClass:"inputWidth",attrs:{clearable:""},model:{value:e.addInfo.postName,callback:function(t){e.$set(e.addInfo,"postName",t)},expression:"addInfo.postName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位名称简",prop:"postNameJ"}},[a("el-input",{staticClass:"inputWidth",attrs:{clearable:""},model:{value:e.addInfo.postNameJ,callback:function(t){e.$set(e.addInfo,"postNameJ",t)},expression:"addInfo.postNameJ"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},on:{focus:e.openTreeChooseAdd},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addSure("addInfo")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:e.dialogEdit,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-dialog",{attrs:{width:"30%",title:"选择部门",visible:e.innerVisibleEdit,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.innerVisibleEdit=t}}},[a("div",{staticStyle:{"max-height":"300px",overflow:"auto"}},[a("el-tree",{attrs:{data:e.data,props:e.defaultProps,"highlight-current":!0},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelTreeDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addChooseSure(2)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-form",{ref:"editInfo",attrs:{model:e.editInfo,"label-width":"100px",rules:e.rules,inline:!0,"label-position":"right"}},[a("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[a("el-input",{staticClass:"inputWidth",attrs:{clearable:""},model:{value:e.editInfo.postName,callback:function(t){e.$set(e.editInfo,"postName",t)},expression:"editInfo.postName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位名称简",prop:"postNameJ"}},[a("el-input",{staticClass:"inputWidth",attrs:{clearable:""},model:{value:e.editInfo.postNameJ,callback:function(t){e.$set(e.editInfo,"postNameJ",t)},expression:"editInfo.postNameJ"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[a("el-input",{staticClass:"inputWidth",attrs:{readonly:""},on:{focus:e.openTreeChooseEdit},model:{value:e.editInfo.deptName,callback:function(t){e.$set(e.editInfo,"deptName",t)},expression:"editInfo.deptName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editSure("editInfo")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},588:function(e,t,a){var o=a(562);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(205)("01506381",o,!0)}});